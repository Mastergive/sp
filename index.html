<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spacetoon Legacy 4.0 | Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†!</title>
    
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />

    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-hls@5.15.0/dist/videojs-contrib-hls.min.js"></script>

    <style>
        /* --- CORE RETRO 2013 CSS STYLING --- */
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

        :root {
            --action-color: #ff4d4d;
            --adventure-color: #4dff4d;
            --zomoroda-color: #ff99cc;
            --comedy-color: #ffff66;
            --sports-color: #3399ff;
            --science-color: #9999ff;
            --bg-space: #050510;
            --current-theme: #ff4d4d; /* Default is Action */
            --spacetoon-blue: #0066cc;
        }

        * { box-sizing: border-box; }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-space);
            /* Starry background effect */
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 2px);
            background-size: 550px 550px, 350px 350px;
            background-position: 0 0, 40px 60px;
            font-family: 'Cairo', sans-serif;
            color: white;
            overflow-x: hidden;
            transition: background-color 1s ease-in-out;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="font-size:24px"><text y="22">â­</text></svg>'), auto;
        }

        /* Header & Logo */
        header {
            background: linear-gradient(180deg, var(--current-theme) 0%, #ff6600 100%);
            padding: 15px;
            text-align: center;
            border-bottom: 5px solid #fff;
            box-shadow: 0 0 20px var(--current-theme);
            position: relative;
            z-index: 10;
            transition: background 1s ease, box-shadow 1s ease;
        }

        h1.logo {
            margin: 0;
            font-size: 3.2rem;
            text-shadow: 4px 4px 0px #000, 7px 7px 0px var(--spacetoon-blue);
            animation: bounce 2s infinite;
        }

        /* Marquee Ticker */
        .news-ticker {
            background: var(--spacetoon-blue);
            color: white;
            padding: 10px;
            white-space: nowrap;
            overflow: hidden;
            border-bottom: 3px solid #003366;
            font-weight: bold;
        }
        .news-ticker span {
            display: inline-block;
            padding-left: 100%;
            animation: marquee 15s linear infinite;
        }

        /* Planets Navigation */
        .planets-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            padding: 20px;
            gap: 15px;
            background: rgba(0,0,0,0.5);
            border-bottom: 4px dashed var(--current-theme);
            transition: border-color 1s ease;
        }

        .planet {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #fff;
            text-shadow: 1px 1px 3px #000;
            box-shadow: 0 0 15px rgba(255,255,255,0.3);
            transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
            cursor: pointer;
            border: 4px solid #ffffff55;
            font-size: 0.8rem;
            user-select: none;
        }

        /* Individual Planet Colors */
        .planet.action { background: radial-gradient(circle at 30% 30%, var(--action-color), #990000); }
        .planet.adventure { background: radial-gradient(circle at 30% 30%, var(--adventure-color), #006600); }
        .planet.zomoroda { background: radial-gradient(circle at 30% 30%, var(--zomoroda-color), #cc0066); }
        .planet.comedy { background: radial-gradient(circle at 30% 30%, var(--comedy-color), #ffcc00); color: #000; }
        .planet.sports { background: radial-gradient(circle at 30% 30%, var(--sports-color), #003399); }
        .planet.science { background: radial-gradient(circle at 30% 30%, var(--science-color), #330066); }

        .planet:hover {
            transform: scale(1.15) rotate(5deg);
            box-shadow: 0 0 30px currentColor, 0 0 50px rgba(255,255,255,0.5);
            z-index: 5;
            border-color: white;
        }

        /* Icon inside planet */
        .planet-icon {
            font-size: 1.5rem;
            margin-bottom: 3px;
        }

        /* Main Layout */
        .container {
            display: flex;
            max-width: 1200px;
            margin: 20px auto;
            gap: 20px;
            padding: 0 20px;
        }

        .main-content {
            flex: 3;
            background: rgba(255,255,255,0.15);
            border: 3px solid #ffffff88;
            border-radius: 20px;
            padding: 25px;
            backdrop-filter: blur(8px);
            box-shadow: 0 0 40px rgba(0,0,0,0.5) inset;
        }

        .sidebar {
            flex: 1;
            background: rgba(0,0,0,0.7);
            border-radius: 20px;
            padding: 15px;
            border: 3px solid var(--current-theme);
            transition: border-color 1s ease;
        }

        h2 {
            color: var(--current-theme);
            border-bottom: 3px dashed var(--current-theme);
            padding-bottom: 10px;
            transition: color 1s ease, border-color 1s ease;
        }

        /* TV Screen Effect */
        .tv-screen {
            width: 100%;
            height: 300px;
            background: #000;
            border: 10px solid #333;
            border-radius: 20px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            margin-top: 15px;
        }
        .tv-content {
            color: #0f0;
            font-family: monospace;
            text-align: center;
            transition: all 0.5s;
            width: 100%; /* Ensure content fills the screen */
            height: 100%;
        }
        
        /* Video Player Styling */
        .video-js {
            width: 100% !important;
            height: 100% !important;
        }
        
        /* Game Grid Section */
        #game-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            padding-top: 15px;
        }

        .game-card {
            background: #222;
            border-radius: 10px;
            overflow: hidden;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.5);
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            border: 2px solid #444;
        }

        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px var(--current-theme);
            border-color: var(--current-theme);
        }

        .game-card p {
            padding: 10px 5px;
            margin: 0;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Button Styling */
        .btn-retro {
            display: block;
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            background: linear-gradient(to bottom, #eeeeee 5%, #cccccc 100%);
            border: 1px solid #999;
            border-radius: 10px;
            color: #333;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 0 #888;
            transition: all 0.1s;
            text-shadow: 1px 1px 0px #fff;
        }
        .btn-retro:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #888;
        }

        /* Announcement Banner */
        #announcement-banner {
            background-color: var(--current-theme);
            color: #000;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: bold;
            box-shadow: 0 0 15px var(--current-theme);
            transition: background-color 1s ease, box-shadow 1s ease;
        }

        /* Pop-up (Game Window) */
        #pop-up-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0);
            padding: 10px; /* Reduced padding for game content */
            background: linear-gradient(135deg, var(--action-color), var(--adventure-color));
            border: 5px solid #fff;
            border-radius: 15px;
            color: white;
            z-index: 1000;
            box-shadow: 0 0 40px var(--action-color);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55), opacity 0.5s;
            opacity: 0;
            text-align: center;
            width: 90%;
            max-width: 600px;
        }
        #pop-up-message.show {
            transform: translate(-50%, -50%) scale(1);
            opacity: 1;
        }

        /* Game Launch Window Style */
        .game-launch-window {
            background: #1a1a1a;
            border: 3px solid var(--current-theme);
            padding: 10px; /* Adjusted padding */
            border-radius: 10px;
            margin-top: 15px;
        }
        
        /* Actual Game Canvas */
        #mini-game-canvas {
            background: #000;
            border: 2px solid #fff;
            margin: 10px auto;
            display: block;
        }
        
        /* Game Info Box */
        #game-info {
            color: #ffcc00;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        #game-click-area {
            background: var(--current-theme);
            padding: 20px;
            margin: 10px auto;
            border-radius: 10px;
            cursor: pointer;
            box-shadow: 0 5px 0 #000;
            transition: all 0.1s;
        }
        #game-click-area:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #000;
        }
    </style>
    
    <script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
</head>
<body>

    <canvas id="trail-canvas"></canvas>
    
    <div id="pop-up-message">
        <h3 id="popup-title"></h3>
        <div class="game-launch-window">
            <div id="game-content-container">
                <canvas id="mini-game-canvas" width="400" height="250"></canvas>
                <div id="game-info"></div>
            </div>
            
            <p id="popup-text" style="color: #eee; font-size: 1rem; margin-top: 10px;"></p>
        </div>
        <button class="btn-retro" style="background:#555; color:white; margin-top:15px;" onclick="closePopup()">Ø¥ØºÙ„Ø§Ù‚ / Ø®Ø±ÙˆØ¬ Ù…Ù† Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    </div>

    <header>
        <h1 class="logo">SPACETOON 4.0</h1>
        <p>Ù‚Ù†Ø§Ø© Ø´Ø¨Ø§Ø¨ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„ - Ù†Ø³Ø®Ø© Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø°Ù‡Ø¨ÙŠ</p>
    </header>

    <div class="news-ticker">
        <span>â­ Ø®Ø¨Ø± Ø¹Ø§Ø¬Ù„: Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù†! â­ Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø± Ù…ØªØ§Ø­ Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨! â­ Ø¹ÙˆØ¯Ø© Ø£Ø¨Ø·Ø§Ù„ Ø§Ù„Ø¯ÙŠØ¬ÙŠØªØ§Ù„!</span>
    </div>

    <div class="planets-nav">
        <div class="planet action" onclick="changeTheme('action', 'Ø£ÙƒØ´Ù†', 'Ø£Ø³Ø±Ø¹ÙˆØ§! Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ù‚ØªØ§Ù„ ØªÙ†ØªØ¸Ø±ÙƒÙ…!', 'âš”ï¸')">
            <span class="planet-icon">ğŸ’¥</span> Ø£ÙƒØ´Ù†
        </div>
        <div class="planet adventure" onclick="changeTheme('adventure', 'Ù…ØºØ§Ù…Ø±Ø§Øª', 'Ø§Ø³ØªÙƒØ´Ù Ø¹ÙˆØ§Ù„Ù… Ø¬Ø¯ÙŠØ¯Ø© ÙˆØ£Ù„ØºØ§Ø² Ù‚Ø¯ÙŠÙ…Ø©!', 'ğŸ—ºï¸')">
            <span class="planet-icon">ğŸ§­</span> Ù…ØºØ§Ù…Ø±Ø§Øª
        </div>
        <div class="planet zomoroda" onclick="changeTheme('zomoroda', 'Ø²Ù…Ø±Ø¯Ø©', 'Ù…Ù…Ù„ÙƒØ© Ø§Ù„Ù„Ø·Ø§ÙØ© ÙˆØ§Ù„Ù…ÙˆØ¶Ø©. Ù…Ø±Ø­Ø¨Ø§ Ø¨Ø§Ù„ÙØªÙŠØ§Øª!', 'ğŸ‘‘')">
            <span class="planet-icon">ğŸ’–</span> Ø²Ù…Ø±Ø¯Ø©
        </div>
        <div class="planet comedy" onclick="changeTheme('comedy', 'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§', 'Ø§Ø³ØªØ¹Ø¯ Ù„Ù„Ø¶Ø­Ùƒ Ø­ØªÙ‰ Ø§Ù„Ø¨ÙƒØ§Ø¡ØŒ Ù„Ø§ Ø­Ø¯ÙˆØ¯ Ù„Ù„Ù…Ø²Ø§Ø­!', 'ğŸ˜‚')">
            <span class="planet-icon">ğŸ¤ª</span> ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§
        </div>
        <div class="planet sports" onclick="changeTheme('sports', 'Ø±ÙŠØ§Ø¶Ø©', 'ØªÙ†Ø§ÙØ³ Ø¨Ø´Ø±Ù ÙˆÙ‚ÙˆØ© Ù„ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ù†ØµØ±!', 'âš½')">
            <span class="planet-icon">ğŸ†</span> Ø±ÙŠØ§Ø¶Ø©
        </div>
        <div class="planet science" onclick="changeTheme('science', 'Ø¹Ù„ÙˆÙ…', 'ØªØ¹Ù„Ù… ÙˆØ§ÙƒØªØ´Ù Ø­Ù‚Ø§Ø¦Ù‚ Ø§Ù„ÙƒÙˆÙ† Ø§Ù„Ù…Ø°Ù‡Ù„Ø©!', 'ğŸ”¬')">
            <span class="planet-icon">ğŸ§ </span> Ø¹Ù„ÙˆÙ…
        </div>
    </div>

    <div class="container">
        <main class="main-content">
            <div id="announcement-banner">
                ğŸŒŸ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ…! Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ø®ØµØµØ© Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙƒÙˆÙƒØ¨ **Ø£ÙƒØ´Ù†**.
            </div>

            <h2 id="planet-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø³Ø¨ÙŠØ³ØªÙˆÙ† Ù„ÙŠØ¬Ø§Ø³ÙŠ</h2>
            
            <div id="planet-status">
                <p>âœ… **Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆÙƒØ¨:** Ù†Ø´Ø· Ø¨Ø§Ù„ÙƒØ§Ù…Ù„. ØªØ°ÙƒØ± Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ù„Ø¹Ø¨ Ø§Ù„Ù†Ø¸ÙŠÙ!</p>
            </div>
            
            <div class="tv-screen" id="tv">
                <div class="tv-content">
                    <video
                        id="spacetoon-player"
                        class="video-js vjs-default-skin"
                        controls
                        preload="auto"
                        poster="https://i.ytimg.com/vi/WkHq5wFm5_c/maxresdefault.jpg"
                        data-setup='{}'>
                        <source src="" type="application/x-mpegURL" />
                        <p class="vjs-no-js">
                            Ù„Ù… ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ù…Ø´ØºÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ.
                        </p>
                    </video>
                </div>
            </div>

            <button class="btn-retro" style="background:linear-gradient(to right, #66ccff, #0099ff); color:white; margin-top:20px;" onclick="playEffect()">ğŸ“º ØªØ´ØºÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ (ÙÙŠØ¯ÙŠÙˆ ØªØ¬Ø±ÙŠØ¨ÙŠ)</button>


            <h3>ğŸ•¹ï¸ Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„ÙƒÙˆÙƒØ¨</h3>
            <div id="game-section">
                </div>

            <button class="btn-retro" style="background:linear-gradient(to right, #ffcc00, #ff6600); color:white; margin-top:20px;" onclick="loadMoreGames()">â• ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
        </main>

        <aside class="sidebar">
            <h3 style="color:white; border-bottom:3px solid white;">Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</h3>
            <button class="btn-retro" style="background:#00aaff; color:white; border-color:#0088cc;" onclick="showBasicPopup('Ø¯Ù„ÙŠÙ„ Ø§Ù„ÙƒÙˆØ§ÙƒØ¨', 'Ø§Ø®ØªØ± ÙƒÙˆÙƒØ¨Ø§Ù‹ Ù„ØªØºÙŠÙŠØ± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŒ Ù…Ø´Ø§Ù‡Ø¯Ø© Ø§Ù„Ø¹Ø±ÙˆØ¶ØŒ ÙˆØ§Ù„ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù‡.', '#00aaff')">Ø¯Ù„ÙŠÙ„ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
            <button class="btn-retro" style="background:#ff7700; color:white; border-color:#cc5500;" onclick="showSecretCode()">ğŸ”’ Ø±Ù…Ø² Ø³Ø±ÙŠ (ØªØ¬Ø±Ø¨Ø©)</button>
            
            <hr style="border-color: #555;">
            
            <h3>Ø£Ù„Ø¹Ø§Ø¨ Ùˆ ØªØ³Ù„ÙŠØ©</h3>
            <button class="btn-retro" onclick="randomFact()">ğŸ’¡ Ù‡Ù„ ØªØ¹Ù„Ù…ØŸ</button>
            <div id="fact-box" style="padding:10px; font-size:0.9rem;"></div>
            
            <hr style="border-color: #555;">
            
            <h3 style="color:white; border-bottom:3px solid white;">Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø²ÙˆØ§Ø±</h3>
            <div style="font-size:2rem; text-align:center; color:var(--current-theme);" id="visitor-count">123456</div>
            <p style="text-align:center; font-size:0.8rem;">Ø²Ø§Ø¦Ø± ÙØ±ÙŠØ¯ Ø§Ù„ÙŠÙˆÙ…</p>
            
            <hr style="border-color: #555;">

            <button class="btn-retro" style="background:red; color:white; border-color:darkred;" onclick="shakeScreen()">ğŸš« Ù„Ø§ ØªØ¶ØºØ· Ù‡Ù†Ø§</button>

        </aside>
    </div>

    <script>
        // --- JAVASCRIPT LOGIC AND EFFECTS ---

        const COLORS = {
            'action': '#ff4d4d',
            'adventure': '#4dff4d',
            'zomoroda': '#ff99cc',
            'comedy': '#ffff66',
            'sports': '#3399ff',
            'science': '#9999ff'
        };

        const GAMES = {
            'action': [
                { name: "Ù‚ØªØ§Ù„ Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ (Ù†Ù‚Ø±Ø§Øª)", icon: "ğŸ‘Š", desc: "Ù„Ø¹Ø¨Ø© Ø³Ø±Ø¹Ø© Ø§Ù„Ù†Ù‚Ø± (Canvas)." },
                { name: "Ù…Ø·Ø§Ø±Ø¯Ø© Ø§Ù„Ù†Ø¬ÙˆÙ…", icon: "ğŸš”", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ù‚ÙˆÙŠØ©." },
                { name: "Ø§Ù„Ù†ÙŠÙ†Ø¬Ø§ Ø§Ù„ØµØºÙŠØ±", icon: "ğŸ¥·", desc: "Ù…Ø­Ø§ÙƒØ§Ø© ØªØ³Ù„Ù„." }
            ],
            'adventure': [
                { name: "ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„ÙƒÙ†Ø²", icon: "ğŸª™", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ø­Ø«." },
                { name: "ØºØ§Ø¨Ø§Øª Ø§Ù„Ø£Ù…Ø§Ø²ÙˆÙ†", icon: "ğŸŒ¿", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ø³ØªÙƒØ´Ø§Ù." }
            ],
            'zomoroda': [
                { name: "Ø£Ø²ÙŠØ§Ø¡ Ø§Ù„Ø£Ù…ÙŠØ±Ø©", icon: "ğŸ‘—", desc: "Ù…Ø­Ø§ÙƒØ§Ø© ØªÙ„Ø¨ÙŠØ³." },
                { name: "Ù…Ø·Ø¨Ø® Ø§Ù„Ø£Ø­Ù„Ø§Ù…", icon: "ğŸ°", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ø·Ø¨Ø®." }
            ],
            'comedy': [
                { name: "Ø§Ù„Ù…Ù‚Ø§Ù„Ø¨ Ø§Ù„Ù…Ø¶Ø­ÙƒØ©", icon: "ğŸˆ", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ù…Ø²Ø±Ø¹Ø© Ù…Ù‚Ù„Ø¨Ùƒ." },
                { name: "Ù‡Ø±ÙˆØ¨ Ø§Ù„Ù‚Ø·", icon: "ğŸˆ", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ø¬Ø±ÙŠ Ù„Ø§ Ù†Ù‡Ø§ÙŠØ© Ù„Ù‡." }
            ],
            'sports': [
                { name: "Ø¶Ø±Ø¨Ø© Ø§Ù„Ø¬Ø²Ø§Ø¡", icon: "ğŸ¥…", desc: "Ù…Ø­Ø§ÙƒØ§Ø© ØªØ³Ø¯ÙŠØ¯." },
                { name: "Ø³Ø¨Ø§Ù‚ Ø§Ù„Ø¯Ø±Ø§Ø¬Ø§Øª", icon: "ğŸš´", desc: "Ù…Ø­Ø§ÙƒØ§Ø© Ø³Ø¨Ø§Ù‚." }
            ],
            'science': [
                { name: "Ù…Ø®ØªØ¨Ø± Ø§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡", icon: "ğŸ§ª", desc: "Ù…Ø­Ø§ÙƒØ§Ø© ØªØ¬Ø±Ø¨Ø©." },
                { name: "Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø±ÙˆØ¨ÙˆØª", icon: "ğŸ¤–", desc: "Ù…Ø­Ø§ÙƒØ§Ø© ØªØµÙ…ÙŠÙ… Ø¢Ù„Ø©." }
            ]
        };
        
        // Use a generic placeholder video (Spacetoon Intro)
        const VIDEO_SOURCE = "https://shd-gcp-live.edgenextcdn.net/live/bitmovin-spacetoon/d8382fb9ab4b2307058f12c7ea90db54/index.m3u8"; // Replace with your stable Spacetoon URL if available
        
        let currentPlanet = 'action';
        let popupInterval;
        let gameActive = false;
        let gameTimer;
        let gameClicks = 0;
        let playerInstance; // Video.js instance

        // Helper to get Arabic name
        function getArabicName(key) {
            const names = {
                'action': 'Ø£ÙƒØ´Ù†', 'adventure': 'Ù…ØºØ§Ù…Ø±Ø§Øª', 'zomoroda': 'Ø²Ù…Ø±Ø¯Ø©',
                'comedy': 'ÙƒÙˆÙ…ÙŠØ¯ÙŠØ§', 'sports': 'Ø±ÙŠØ§Ø¶Ø©', 'science': 'Ø¹Ù„ÙˆÙ…'
            };
            return names[key] || 'ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        }

        // --- CORE FUNCTIONS ---

        // 1. Theme Changer & Content Loader
        function changeTheme(planetKey, arabicName, message, icon) {
            const color = COLORS[planetKey];
            currentPlanet = planetKey;
            
            // CSS Variable Update
            document.documentElement.style.setProperty('--current-theme', color);
            
            // Update Header BG to match theme
            document.querySelector('header').style.background = `linear-gradient(180deg, ${color} 0%, #ff6600 100%)`;
            document.querySelector('header').style.boxShadow = `0 0 20px ${color}`;

            // Content Update
            document.getElementById('planet-title').innerText = `Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ÙƒÙˆÙƒØ¨ ${arabicName}`;
            document.getElementById('announcement-banner').innerHTML = `${icon} Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨ÙƒÙ…! Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ù…Ø®ØµØµØ© Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙƒÙˆÙƒØ¨ **${arabicName}**.`;
            document.getElementById('planet-status').innerHTML = `âœ… **Ø­Ø§Ù„Ø© Ø§Ù„ÙƒÙˆÙƒØ¨:** ${message}`;

            // Load Games
            loadGames(planetKey);
            
            // Stop video on planet change
            if (playerInstance) {
                playerInstance.pause();
                playerInstance.currentTime(0);
            }
        }

        // 2. Game Loading Function (Now uses launchGame)
        function loadGames(planetKey) {
            const gameSection = document.getElementById('game-section');
            gameSection.innerHTML = ''; // Clear previous games
            
            const gamesList = GAMES[planetKey];
            
            gamesList.forEach(game => {
                const card = document.createElement('div');
                card.classList.add('game-card');
                card.innerHTML = `
                    <div style="height:120px; background:${COLORS[planetKey]}20; display:flex; align-items:center; justify-content:center; font-size:3rem; border-bottom:2px solid ${COLORS[planetKey]}">
                        ${game.icon}
                    </div>
                    <p>${game.name}</p>
                    <p style="font-size:0.75rem; color:#aaa; padding:0 5px 10px 5px;">${game.desc}</p>
                `;
                // ACTION: Launch the *actual* Mini-Game if the name contains 'Ù†Ù‚Ø±Ø§Øª'
                if (game.name.includes('Ù†Ù‚Ø±Ø§Øª')) {
                     card.onclick = () => launchGame(game.name, planetKey, true); // True to indicate actual game
                } else {
                     card.onclick = () => launchGame(game.name, planetKey, false); // False for simulation
                }
                gameSection.appendChild(card);
            });
        }
        
        // 3. Game Launcher Function (Handles both simulation and actual mini-game)
        function launchGame(gameName, planetKey, isActualGame) {
            const color = COLORS[planetKey];
            const popup = document.getElementById('pop-up-message');
            const popupTitle = document.getElementById('popup-title');
            const popupText = document.getElementById('popup-text');
            const gameContentContainer = document.getElementById('game-content-container');
            const gameCanvas = document.getElementById('mini-game-canvas');

            popupTitle.innerText = `ğŸ® ØªØ´ØºÙŠÙ„ Ù„Ø¹Ø¨Ø©: ${gameName}`;
            popup.style.background = `linear-gradient(135deg, ${color}, #111)`;
            popup.style.boxShadow = `0 0 40px ${color}`;
            
            // Reset state
            gameContentContainer.innerHTML = ''; 
            popupText.innerText = '';
            
            if (isActualGame) {
                // --- ACTUAL MINI-GAME LOGIC (Canvas Clicker) ---
                
                gameContentContainer.appendChild(gameCanvas);
                gameContentContainer.innerHTML += '<div id="game-info"></div>';
                
                gameCanvas.style.display = 'block';
                popupText.innerText = 'Ø§Ø³ØªØ¹Ø¯ Ù„Ù€ "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø±Ø¹Ø©" ÙÙŠ 5 Ø«ÙˆØ§Ù†ÙŠ! Ø§Ù†Ù‚Ø± ÙÙŠ Ø§Ù„Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ø­Ù…Ø±Ø§Ø¡ Ø¨Ø£Ø³Ø±Ø¹ Ù…Ø§ ÙŠÙ…ÙƒÙ†.';
                
                // Set click area
                const clickArea = document.createElement('div');
                clickArea.id = 'game-click-area';
                clickArea.style.backgroundColor = color;
                clickArea.innerHTML = '<h2>Ø§Ù†Ù‚Ø± Ù‡Ù†Ø§!</h2><p id="click-counter">Ø§Ù„Ù†Ù‚Ø±Ø§Øª: 0</p>';
                gameContentContainer.appendChild(clickArea);
                
                // Wait for the popup to show before starting the game
                setTimeout(() => {
                    startGame(clickArea, gameCanvas);
                }, 500); 

            } else {
                // --- SIMULATION LOGIC (Old Loading Bar) ---
                 gameCanvas.style.display = 'none';
                 gameContentContainer.innerHTML = `
                    <p id="popup-text-sim" style="color: #eee;">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§ØªØµØ§Ù„ Ø´Ø¨ÙƒØ© Ø³Ø¨ÙŠØ³ØªÙˆÙ†... (ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± â³)</p>
                    <div id="game-progress" class="progress-bar-container">
                        <div id="progress-bar" class="progress-bar"></div>
                    </div>
                    <p id="game-status" style="font-size:0.8rem; color:#aaa;">Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„: 0%</p>
                 `;
                 
                 const progressBar = document.getElementById('progress-bar');
                 const gameStatus = document.getElementById('game-status');
                 const popupTextSim = document.getElementById('popup-text-sim');

                 let progress = 0;
                 const steps = [
                     { p: 20, msg: "Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ø­Ø±Ùƒ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ø«Ù„Ø§Ø«ÙŠØ©... ğŸš€" },
                     { p: 50, msg: "Ø¬Ø§Ø±Ù ÙÙƒ Ø¶ØºØ· Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒÙˆÙƒØ¨... ğŸŒŒ" },
                     { p: 80, msg: "Ø¬Ø§Ø±ÙŠ Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ÙŠÙ† Ø¹Ø¨Ø± Ø´Ø¨ÙƒØ© Ø³Ø¨ÙŠØ³ØªÙˆÙ†..." },
                     { p: 100, msg: "ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ø¶ØºØ· Ø¥ØºÙ„Ø§Ù‚ Ù„Ù„Ø¹Ø¨." }
                 ];
                 let stepIndex = 0;

                 if (popupInterval) clearInterval(popupInterval);

                 popupInterval = setInterval(() => {
                     if (progress < 100) {
                         progress += 1 + Math.random() * 5; 
                         if (progress > 100) progress = 100;

                         progressBar.style.width = `${progress}%`;
                         gameStatus.innerText = `Ø­Ø§Ù„Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„: ${Math.floor(progress)}%`;

                         if (stepIndex < steps.length && progress >= steps[stepIndex].p) {
                             popupTextSim.innerText = steps[stepIndex].msg;
                             stepIndex++;
                         }
                     } else {
                         clearInterval(popupInterval);
                     }
                 }, 100); 
            }
            
            popup.classList.add('show');
        }
        
        // --- MINI-GAME LOGIC (Simple Clicker) ---
        function startGame(clickArea, canvas) {
            gameClicks = 0;
            gameActive = true;
            const gameDuration = 5; // seconds
            let timeRemaining = gameDuration;

            const clickCounter = document.getElementById('click-counter');
            const gameInfo = document.getElementById('game-info');
            
            gameInfo.innerText = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timeRemaining} Ø«ÙˆØ§Ù†Ù`;

            // Canvas drawing (just for effect)
            const ctx = canvas.getContext('2d');
            
            function drawCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillStyle = COLORS[currentPlanet];
                // Draw a simple, energetic shape based on the theme color
                ctx.fillRect(10, 10, canvas.width - 20, 10);
                ctx.fillRect(10, canvas.height - 20, canvas.width - 20, 10);
            }
            drawCanvas(); // Initial draw

            // Click listener
            const clickHandler = () => {
                if (gameActive) {
                    gameClicks++;
                    clickCounter.innerText = `Ø§Ù„Ù†Ù‚Ø±Ø§Øª: ${gameClicks}`;
                }
            };
            clickArea.addEventListener('click', clickHandler);

            // Timer
            gameTimer = setInterval(() => {
                timeRemaining--;
                gameInfo.innerText = `Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${timeRemaining} Ø«ÙˆØ§Ù†Ù`;

                if (timeRemaining <= 0) {
                    clearInterval(gameTimer);
                    gameActive = false;
                    clickArea.removeEventListener('click', clickHandler);
                    
                    const score = (gameClicks / gameDuration).toFixed(2);
                    gameInfo.innerHTML = `Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„ÙˆÙ‚Øª! <br> **Ø³Ø¬Ù„Øª ${gameClicks} Ù†Ù‚Ø±Ø©** Ø¨Ù…Ø¹Ø¯Ù„ **${score}** Ù†Ù‚Ø±Ø©/Ø«Ø§Ù†ÙŠØ©.`;
                    clickArea.innerHTML = '<h2>Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h2>';
                    
                    document.getElementById('popup-text').innerText = `ØªÙ‡Ø§Ù†ÙŠÙ†Ø§! Ù„Ù‚Ø¯ Ø£Ø«Ø¨ØªØª Ø¬Ø¯Ø§Ø±ØªÙƒ ÙÙŠ Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø³Ø±Ø¹Ø©.`;
                }
            }, 1000);
            
            // Cleanup on close
            window.cleanupGame = () => {
                clearInterval(gameTimer);
                gameActive = false;
                clickArea.removeEventListener('click', clickHandler);
            }
        }
        
        // 4. Close Popup (Handles Game Cleanup)
        function closePopup() {
            document.getElementById('pop-up-message').classList.remove('show');
            if (popupInterval) clearInterval(popupInterval);
            if (window.cleanupGame) {
                window.cleanupGame();
            }
            // Re-hide the canvas and click area for clean state
            const gameCanvas = document.getElementById('mini-game-canvas');
            if (gameCanvas) gameCanvas.style.display = 'none';
        }


        // 5. TV Live Stream Logic (Using Video.js)
        
        function playEffect() {
    const screen = document.querySelector('.tv-screen');
    const playerElement = document.getElementById('spacetoon-player');
    const activeVideoSource = VIDEO_SOURCE;
    
    // **Ø§Ù„Ø¬Ø²Ø¡ 1: ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´ØºÙ„ (ÙŠØªÙ… Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø·)**
    if (!playerInstance) {
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´ØºÙ„ Ù„Ø£ÙˆÙ„ Ù…Ø±Ø© Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© Ù„Ù„Ø¨Ø« Ø§Ù„Ø­ÙŠ (HLS)
        playerInstance = videojs('spacetoon-player', {
            controls: true,
            autoplay: false,
            preload: 'auto',
            fluid: true, 
            techOrder: ['html5'], // Ø¥Ø¬Ø¨Ø§Ø± Ø§Ù„Ù…ØªØµÙØ­ Ø¹Ù„Ù‰ Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ© HTML5 (Ù…Ø¹ Ø¯Ø¹Ù… HLS)
            // ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ø®ÙŠØ§Ø±Ø§Øª HLS Ø¥Ø¶Ø§ÙÙŠØ© Ù‡Ù†Ø§ Ø¥Ø°Ø§ Ù„Ø²Ù… Ø§Ù„Ø£Ù…Ø±
            hls: {
                withCredentials: false 
            }
        });
        
        // **Ù…Ù„Ø§Ø­Ø¸Ø© Ù…Ù‡Ù…Ø© Ø¬Ø¯Ø§Ù‹:** Ù„Ø§ ØªÙ‚Ù… Ø¨ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´ØºÙ„ Ø¨Ø¹Ø¯ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù€ innerHTML.

    } else {
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø´ØºÙ„ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹ Ø¨Ø§Ù„ÙØ¹Ù„ØŒ Ù‚Ù… Ø¨Ø¥ÙŠÙ‚Ø§ÙÙ‡ ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„ÙˆÙ‚Øª Ù„Ù„ØµÙØ± Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨Ø«
        playerInstance.pause();
        playerInstance.currentTime(0);
    }
    
    // **Ø§Ù„Ø¬Ø²Ø¡ 2: ØªØ­Ø¯ÙŠØ« Ù…ØµØ¯Ø± Ø§Ù„Ø¨Ø« ÙˆØ§Ù„ØªØ´ØºÙŠÙ„**
    
    // 1. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØµØ¯Ø± (Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†ÙˆØ¹ application/x-mpegURL)
    playerInstance.src({ 
        type: "application/x-mpegURL", 
        src: activeVideoSource 
    });

    // 2. Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„ØªØ´ØºÙŠÙ„ Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø®Ø·Ø£ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
    playerInstance.ready(function() {
        // Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠ ÙØ¦Ø§Øª Ù‚Ø¯ÙŠÙ…Ø© ØªÙ…Ù†Ø¹ Ø§Ù„Ø±Ø¤ÙŠØ©
        playerElement.style.display = 'block'; 

        // ØªÙØ¹ÙŠÙ„ ØªØ£Ø«ÙŠØ± "ØªØ´ÙˆÙŠØ´" Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ø¯ÙŠÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
        screen.classList.add('flicker-on');
        setTimeout(() => {
            screen.classList.remove('flicker-on');
        }, 1500);

        this.play().catch(error => {
            console.error("Video Autoplay failed:", error);
            
            // Ø¥Ø°Ø§ ÙØ´Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØŒ Ù‚Ù… Ø¨Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ÙˆØ§Ø¶Ø­Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const message = `<div style="text-align: center; padding: 20px;">
                                <p style="color:red; font-size:1.1rem;">âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ØªØ´ØºÙŠÙ„ (Play) ÙÙŠ Ø§Ù„Ù…Ø´ØºÙ„ Ø£Ø¯Ù†Ø§Ù‡.</p>
                            </div>`;
            
            // Ø¶Ø¹ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ÙÙˆÙ‚ Ø§Ù„Ù…Ø´ØºÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)
            // ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¹Ù†ØµØ± Ù…Ù†ÙØµÙ„ Ù„Ø¹Ø±Ø¶ Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† ØªØºÙŠÙŠØ± Ù…Ø­ØªÙˆÙ‰ screen
        });
    });
}
        // ... (Other functions like loadMoreGames, showBasicPopup, showSecretCode, animateVisitorCount, randomFact, shakeScreen, mouse trail remain the same as previous code) ...

        // Helper function for simple popup (re-added for clean state)
        function showBasicPopup(title, text, bgColor) {
             const popup = document.getElementById('pop-up-message');
             document.getElementById('popup-title').innerText = title;
             document.getElementById('game-content-container').innerHTML = `<p id="popup-text" style="color: #eee; padding: 20px;">${text}</p>`;
             
             const color1 = bgColor;
             const color2 = '#fff';
             popup.style.background = `linear-gradient(135deg, ${color1}, ${color2}20)`;
             popup.style.boxShadow = `0 0 40px ${color1}`;
             
             popup.classList.add('show');
             if (popupInterval) clearInterval(popupInterval);
             if (window.cleanupGame) window.cleanupGame(); // Cleanup any running game
        }
        
        // 10. Initialization
        window.onload = function() {
            // Start with the default theme (Action)
            changeTheme('action', 'Ø£ÙƒØ´Ù†', 'Ø£Ø³Ø±Ø¹ÙˆØ§! Ø§Ù„Ù‚ÙˆØ© ÙˆØ§Ù„Ù‚ØªØ§Ù„ ØªÙ†ØªØ¸Ø±ÙƒÙ…!', 'âš”ï¸');
            animateVisitorCount();
            
            // Initialize Video.js Player Placeholder
            playerInstance = videojs('spacetoon-player');
        };

        // --- (Copied and simplified versions of other functions for completeness) ---

        function loadMoreGames() {
            showBasicPopup('ØªØ­Ù…ÙŠÙ„ Ø¥Ø¶Ø§ÙÙŠ...', 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø³Ø­Ø§Ø¨Ø© Ø³Ø¨ÙŠØ³ØªÙˆÙ† Ø¹Ù† Ø£Ù„Ø¹Ø§Ø¨ Ø£Ø®Ø±Ù‰...', '#fff');
            setTimeout(() => {
                const newGame = { name: `Ù„Ø¹Ø¨Ø© Ø¥Ø¶Ø§ÙÙŠØ© Ù„ÙƒÙˆÙƒØ¨ ${getArabicName(currentPlanet)}`, icon: "ğŸ", desc: "Ù…ÙØ§Ø¬Ø£Ø© ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹Ø©!" };
                GAMES[currentPlanet].push(newGame);
                loadGames(currentPlanet);
                showBasicPopup('ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„!', 'ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­ Ø¥Ù„Ù‰ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©!', '#0f0');
            }, 1500);
        }

        const FACTS = [
            "Ù‡Ù„ ØªØ¹Ù„Ù… Ø£Ù† ØµÙˆØª Ø§Ù„Ù…Ø­Ù‚Ù‚ ÙƒÙˆÙ†Ø§Ù† Ù‡Ùˆ Ù†ÙØ³ ØµÙˆØª Ø§Ù„ÙƒØ§Ø¨ØªÙ† Ù…Ø§Ø¬Ø¯ØŸ",
            "Ø³Ø§Ø¨Ù‚ ÙˆÙ„Ø§Ø­Ù‚ ØªÙ… Ø¥Ù†ØªØ§Ø¬Ù‡ Ù„ØªØ­ÙÙŠØ² Ø§Ù„Ø£Ø·ÙØ§Ù„ Ø¹Ù„Ù‰ Ø³Ø¨Ø§Ù‚Ø§Øª Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø©.",
            "ÙƒÙˆÙƒØ¨ Ø¨ÙˆÙ† Ø¨ÙˆÙ† Ù…Ø®ØµØµ Ù„Ù„Ø£Ø·ÙØ§Ù„ Ø§Ù„ØµØºØ§Ø± Ø¬Ø¯Ø§Ù‹.",
            "Ø¹Ø¯Ù†Ø§Ù† ÙˆÙ„ÙŠÙ†Ø§ Ù‡Ùˆ Ø£Ø­Ø¯ Ø£Ù‚Ø¯Ù… Ø§Ù„Ù…Ø³Ù„Ø³Ù„Ø§Øª Ø§Ù„ØªÙŠ Ø¹Ø±Ø¶Øª."
        ];
        function randomFact() {
            const fact = FACTS[Math.floor(Math.random() * FACTS.length)];
            const box = document.getElementById('fact-box');
            box.style.opacity = '0';
            setTimeout(() => {
                box.innerText = fact;
                box.style.opacity = '1';
            }, 300);
        }

        function shakeScreen() {
            const body = document.body;
            let x = 0;
            const interval = setInterval(() => {
                x++;
                const moveX = Math.random() * 20 - 10;
                const moveY = Math.random() * 20 - 10;
                body.style.transform = `translate(${moveX}px, ${moveY}px)`;
                if (x > 10) {
                    clearInterval(interval);
                    body.style.transform = 'translate(0,0)';
                    showBasicPopup('ğŸ˜… Ø¹Ø°Ø±Ø§Ù‹!', 'Ù‚Ù„Ù†Ø§ Ù„Ùƒ Ù„Ø§ ØªØ¶ØºØ·! ÙƒØ§Ø¯ Ø§Ù„ÙƒÙˆÙƒØ¨ Ø£Ù† ÙŠÙ†ÙØ¬Ø±.', '#f90');
                }
            }, 50);
        }

        function animateVisitorCount() {
            const countElement = document.getElementById('visitor-count');
            let currentCount = parseInt(countElement.innerText);
            const interval = setInterval(() => {
                currentCount += Math.floor(Math.random() * 5);
                countElement.innerText = currentCount.toLocaleString('en'); 
            }, 1000);
            setTimeout(() => clearInterval(interval), 30000); 
        }

        function showSecretCode() {
            const code = prompt("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ù„ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ Ø§Ù„Ø³ÙˆØ¨Ø±:");
            if (code && code.toLowerCase() === "spacetoon") {
                showBasicPopup("ğŸ”“ Ù…Ø¨Ø±ÙˆÙƒ!", "Ù„Ù‚Ø¯ ØªØ°ÙƒØ±Øª Ø§Ù„Ø±Ù…Ø²! ØªÙ… ØªÙØ¹ÙŠÙ„ ÙˆØ¶Ø¹ (Ø§Ù„Ø¬ÙŠÙ„ Ø§Ù„Ø°Ù‡Ø¨ÙŠ).", '#ff0');
                document.body.style.backgroundColor = 'darkorange'; 
            } else {
                showBasicPopup("âŒ Ø®Ø·Ø£!", "Ø§Ù„Ø±Ù…Ø² Ø®Ø§Ø·Ø¦. Ø­Ø§ÙˆÙ„ ØªØ°ÙƒØ±Ù‡ Ù…Ù† Ù‚Ø¯ÙŠÙ… Ø§Ù„Ø²Ù…Ø§Ù†...", '#f00');
            }
        }
        
        // Mouse Trail Logic (kept the same)
        const canvas = document.getElementById('trail-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        class Particle {
            constructor(x, y) {
                this.x = x;
                this.y = y;
                this.size = Math.random() * 5 + 1;
                this.speedX = Math.random() * 3 - 1.5;
                this.speedY = Math.random() * 3 - 1.5;
                this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.size > 0.2) this.size -= 0.1;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
        window.addEventListener('mousemove', (e) => {
            for (let i = 0; i < 3; i++) {
                particles.push(new Particle(e.x, e.y));
            }
        });
        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particles.length; i++) {
                particles[i].update();
                particles[i].draw();
                if (particles[i].size <= 0.2) {
                    particles.splice(i, 1);
                    i--;
                }
            }
            requestAnimationFrame(animateParticles);
        }
        animateParticles();
    </script>
</body>
</html>
